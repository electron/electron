From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Heilig Benedek <benecene@gmail.com>
Date: Thu, 18 Oct 2018 17:08:03 -0700
Subject: tts.patch

* Adds patch in //chrome/browser/speech/tts_controller_impl.cc
  to disable calls using chrome profile class.
* Adds patch in //chrome/browser/speech/tts_message_filter.cc
  to remove reference to browser context when its signaled for
  destruction from content layer.

diff --git a/chrome/browser/speech/tts_controller_delegate_impl.cc b/chrome/browser/speech/tts_controller_delegate_impl.cc
index a0503e80805d47167cbce9deb848cdf14024f17a..da970c937f75b2048b035d34d977fbe67a428a39 100644
--- a/chrome/browser/speech/tts_controller_delegate_impl.cc
+++ b/chrome/browser/speech/tts_controller_delegate_impl.cc
@@ -103,6 +103,7 @@ void TtsControllerDelegateImpl::UpdateUtteranceDefaultsFromPrefs(
 
 const PrefService* TtsControllerDelegateImpl::GetPrefService(
     content::TtsUtterance* utterance) {
+#if 0
   // The utterance->GetBrowserContext() is null in tests.
   if (!utterance->GetBrowserContext())
     return nullptr;
@@ -110,6 +111,8 @@ const PrefService* TtsControllerDelegateImpl::GetPrefService(
   const Profile* profile =
       Profile::FromBrowserContext(utterance->GetBrowserContext());
   return profile ? profile->GetPrefs() : nullptr;
+#endif
+  return nullptr;
 }
 
 const base::DictionaryValue* TtsControllerDelegateImpl::GetLangToVoicePref(
