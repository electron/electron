From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: deepak1556 <hop2deep@gmail.com>
Date: Fri, 3 Sep 2021 18:28:51 -0700
Subject: fix: expose DecrementCapturerCount in web_contents_impl

This was made private in https://chromium-review.googlesource.com/c/chromium/src/+/2807829 but
we invoke it in order to expose contents.decrementCapturerCount([stayHidden, stayAwake])
to users. We should try to upstream this.

diff --git a/content/browser/web_contents/web_contents_impl.h b/content/browser/web_contents/web_contents_impl.h
index 15e539c641a951649f34134bbc93fde5bcb0e287..0ca8171891b8af0e62ffae5e26643ec1d7405e07 100644
--- a/content/browser/web_contents/web_contents_impl.h
+++ b/content/browser/web_contents/web_contents_impl.h
@@ -1810,7 +1810,7 @@ class CONTENT_EXPORT WebContentsImpl : public WebContents,
   // IncrementCapturerCount() is destructed.
   void DecrementCapturerCount(bool stay_hidden,
                               bool stay_awake,
-                              bool is_activity = true);
+                              bool is_activity = true) override;
 
   // Calculates the PageVisibilityState for |visibility|, taking the capturing
   // state into account.
diff --git a/content/public/browser/web_contents.h b/content/public/browser/web_contents.h
index fdb9e4b3d53d7f85d35e00ddedea1fde1c2c5c2b..3a523e140c1565bbf5ddc787ba8a23ed00fbd337 100644
--- a/content/public/browser/web_contents.h
+++ b/content/public/browser/web_contents.h
@@ -668,6 +668,10 @@ class WebContents : public PageNavigator,
       bool stay_awake,
       bool is_activity = true) WARN_UNUSED_RESULT = 0;
 
+  virtual void DecrementCapturerCount(bool stay_hidden,
+                                      bool stay_awake,
+                                      bool is_activity = true) = 0;
+
   // Getter for the capture handle, which allows a captured application to
   // opt-in to exposing information to its capturer(s).
   virtual const blink::mojom::CaptureHandleConfig& GetCaptureHandleConfig() = 0;
